<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="msapplication-tap-highlight" content="no" />
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />
        <script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
        <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
        <link rel="stylesheet" type="text/css" href="css/index.css" />

        <link rel="stylesheet" href="css/style.mobile.css" />
        <link rel="stylesheet" href="css/style.css">

        <script src="js/jquery.js"></script>
        <script src="js/jquery.mobile.js"></script>
        <script src="js/database.js"></script>
        <script src="SQLitePlugin.js"></script>


        <title>Hello World</title>
    </head>
    <body>
         <div class="demo-wrapper" data-role="page">
            <div class="panel left" data-role="panel" data-position="left" data-display="push" id="panel-01">
                <ul>
                    <li class="profile"><a href="settings.html" title="Profile">Setting</a></li>
                    <li class="profile"><a href="addtodo.html" title="Profile">Nieuwe todo</a></li>
                    <li id="refresh" class="profile"><button>refresh</button></li>
                </ul>
            </div>
            <div class="header" data-role="header">
                <span class="open left"><a href="#panel-01">&#61641;</a></span>
                <span class="title">To Do lijst app</span>
            </div>
            <div class="" id="todo" data-role="content">
                <p><b>Hier een lijst met alles wat ik nog moet doen!</b></p>
            </div>
        </div>
        <script type="text/javascript" src="cordova.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
        <script type="text/javascript">
            app.initialize();
            
            if(localStorage.getItem("todolist") === null)
            {
                var todos = '{"todo" : [{ "Naam": "Afwassen", "Beschrijving": "Sam moet altijd lang afwassen", "Tijdstip":"14:46"},';
                todos += '{ "Naam": "Mobile1 Maken", "Beschrijving": "Opgegeven huiswerk voor mobile1 maken", "Tijdstip":"16:00"},';
                todos +='{ "Naam": "Gamen", "Beschrijving": "Na het huiswerk gaan gamen", "Tijdstip":"18:50"}]}';
                
                var settings = '{ "ShowDescription": "on", "ShowTime": "on" }';

                localStorage.setItem("todolist", todos);
                localStorage.setItem("settings", settings);
            }
            printToDo();
        
            function printToDo()
            {

                    var todos = JSON.parse(localStorage.getItem("todolist"));
                    var settings = JSON.parse(localStorage.getItem("settings"));

                    for(var todo in todos.todo)
                    {
                        var newtodo = "Naam : " + todos.todo[todo].Naam;

                        if(settings.ShowDescription === "on")
                        {
                            newtodo += " | Beschrijving : " + todos.todo[todo].Beschrijving;
                        } 
                        if(settings.ShowTime === "on")
                        {
                            newtodo += "| Om " + todos.todo[todo].Tijdstip;
                        }

                        $("#todo").append("<p>" + newtodo + "</p>");
                    }
            }
            $("#refresh").click(function()
            {
                location.reload();
            });
        </script>
    </body>
</html>
